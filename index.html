<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Registro Scuola</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <div class="header-left">
      <button id="homeBtn" class="btn">Home</button>
      <button id="importBtnHeader" class="btn">Importa</button>
    </div>

    <h1>Registro Scuola — Licei</h1>

    <div class="header-right">
      <span id="userInfo" class="user-info"></span>
      <button id="loginBtn" class="btn">Accedi (Google)</button>
      <button id="logoutBtn" class="btn" style="display:none;">Esci</button>
      <button id="backBtn" class="btn">Indietro</button>
    </div>
  </header>

  <main id="app">
    <!-- DASHBOARD -->
    <section id="dashboard" class="screen">
      <h2>Seleziona un Liceo e una Classe</h2>
      <div id="schoolsContainer" class="grid"></div>
    </section>

    <!-- CLASS VIEW -->
    <section id="classView" class="screen" style="display:none;">
      <div class="class-header">
        <h2 id="classTitle"></h2>
        <div>
          <button id="addStudentBtn" class="btn">Aggiungi alunno</button>
        </div>
      </div>
      <table id="studentsTable" class="striped">
        <thead>
          <tr><th>Nome</th><th>Voti</th><th>Assenze</th><th>Azioni</th></tr>
        </thead>
        <tbody></tbody>
      </table>
    </section>
    
     <section id="orarioSettimanale">
  <h2>Orario Settimanale</h2>
  <table class="timetable">
    <thead>
      <tr>
        <th>Ora</th>
        <th>Lunedì</th>
        <th>Martedì</th>
        <th>Mercoledì</th>
        <th>Giovedì</th>
        <th>Venerdì</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <th>I</th>
        <td></td>
        <td></td>
        <td>2S</td>
        <td>Disponibile</td>
        <td></td>
      </tr>
      <tr>
        <th>II</th>
        <td></td>
        <td></td>
        <td>1S</td>
        <td>3S</td>
        <td></td>
      </tr>
      <tr>
        <th>III</th>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <th>IV</th>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td>3L</td>
      </tr>
      <tr>
        <th>V</th>
        <td></td>
        <td></td>
        <td></td>
        <td>2L</td>
        <td>1L</td>
      </tr>
      <tr>
        <th>VI</th>
        <td></td>
        <td></td>
        <td></td>
        <td>5L</td>
        <td>5S</td>
      </tr>
      <tr>
        <th>VII</th>
        <td></td>
        <td></td>
        <td></td>
        <td>4LS</td>
        <td></td>
      </tr>
    </tbody>
  </table>
</section>

    <!-- IMPORT SECTION -->
    <section id="importSection" class="screen" style="display:none;">
      <h2>Importa studenti da file Excel</h2>
      <div class="controls">
        <label class="file-label">File .xlsx
          <input id="xlsxInput" type="file" accept=".xls,.xlsx" />
        </label>

        <select id="sheetSelect" style="display:none;"></select>

        <label>
          Classe destinazione:
          <select id="importClassSelect">
            <option value="scientifico-1">Scientifico I</option>
            <option value="scientifico-2">Scientifico II</option>
            <option value="scientifico-3">Scientifico III</option>
            <option value="scientifico-4">Scientifico IV</option>
            <option value="scientifico-5">Scientifico V</option>
            <option value="linguistico-1">Linguistico I</option>
            <option value="linguistico-2">Linguistico II</option>
            <option value="linguistico-3">Linguistico III</option>
            <option value="linguistico-4">Linguistico IV</option>
            <option value="linguistico-5">Linguistico V</option>
          </select>
        </label>

        <label><input type="checkbox" id="hasHeader" checked /> Prima riga intestazione</label>
        <label><input type="checkbox" id="tryDedupe" checked /> Prova deduplica (match esatto)</label>

        <button id="previewBtn" class="btn" style="display:none;">Anteprima</button>
        <button id="doImportBtn" class="btn" style="display:none;">Importa</button>
      </div>

      <div id="previewArea" style="display:none;">
        <h3>Anteprima (prime righe)</h3>
        <pre id="previewContent"></pre>
      </div>

      <p class="small-note">Suggerimento: salva il file come .xlsx e assicurati che i nomi siano nella prima colonna. Se hai intestazione, attiva "Prima riga intestazione".</p>
    </section>
  </main>

 <!-- MODAL STUDENTE -->
<div id="studentModal" class="modal" style="display:none;">
  <div class="modal-overlay" id="modalOverlay"></div>
  <div class="modal-card" role="dialog" aria-modal="true">
    <header class="modal-header">
      <h2 id="studentName">Scheda studente</h2>
      <button id="closeModalBtn" class="btn">Chiudi</button>
    </header>

    <!-- RIEPILOGO IN ALTO -->
    <div id="studentSummary" class="student-summary">
      <div>Totale voti: <span id="summaryGrades">0</span></div>
      <div>Totale assenze: <span id="summaryAbsences">0</span></div>
      <div>Annotazioni: <span id="summaryNotes">0</span></div>
    </div>

    <!-- FORMS + STORICO IN BASSO -->
    <div class="student-details">
      <div class="student-forms">
        <form id="gradeForm" class="mini-form">
          <h3>Aggiungi voto</h3>
          <label>Materia <input name="subject" required /></label>
          <label>Voto <input name="value" type="number" min="0" max="10" step="0.25" required /></label>
          <label>Data <input name="date" type="date" /></label>
          <button type="submit" class="btn">Salva voto</button>
        </form>

        <form id="absenceForm" class="mini-form">
          <h3>Aggiungi assenza</h3>
          <label>Data <input name="date" type="date" required /></label>
          <label>Motivo <input name="reason" /></label>
          <button type="submit" class="btn">Salva assenza</button>
        </form>

        <form id="noteForm" class="mini-form">
          <h3>Aggiungi annotazione</h3>
          <label>Testo <textarea name="text" rows="3" required></textarea></label>
          <button type="submit" class="btn">Salva annotazione</button>
        </form>
      </div>

      <div class="student-history">
        <h3>Storico voti</h3>
        <ul id="gradesList"></ul>
        <h3>Storico assenze</h3>
        <ul id="absencesList"></ul>
        <h3>Annotazioni</h3>
        <ul id="notesList"></ul>
      </div>
    </div>
  </div>
</div>

  
  <!-- librerie -->
  <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>

  <!-- il nostro script (module) -->
  <script type="module" src="app.js"></script>
</body>
</html>
